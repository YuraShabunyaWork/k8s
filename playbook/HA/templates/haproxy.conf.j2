global
    chroot      /var/lib/haproxy
    pidfile     /var/run/haproxy.pid
    maxconn     4000
    user        haproxy
    group       haproxy
    daemon

defaults
    log     global
    mode    tcp
    retries 2
    timeout client  30m
    timeout connect 4s
    timeout server  30m
    timeout check   5s

frontend main
    bind            172.16.0.170:7443
    default_backend app

backend app
    balance roundrobin
    server control1 172.16.0.101:6443 check
    server control2 172.16.0.102:6443 check
    server control3 172.16.0.103:6443 check
